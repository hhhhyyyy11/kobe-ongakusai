name: GitHub Copilot Review (Japanese)

on:
  pull_request:
    branches: [develop]
    types: [opened, synchronize, reopened]

jobs:
  copilot-review:
    runs-on: ubuntu-latest
    permissions:
      contents: read
      pull-requests: write

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Request Copilot Review in Japanese
        uses: actions/github-script@v7
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          script: |
            const prNumber = context.payload.pull_request.number;
            const owner = context.repo.owner;
            const repo = context.repo.repo;

            // プルリクエストに日本語レビューを要求するコメントを追加
            const reviewRequest = `@github-copilot[bot]

            このプルリクエストを**日本語**でレビューしてください。以下の観点でお願いします：

            ## レビュー観点（日本語で回答してください）
            - 📝 **コード品質**: TypeScriptの型安全性、Next.jsのベストプラクティス
            - 🎨 **UI/UX**: Tailwind CSSの適切な使用、レスポンシブデザイン
            - ⚡ **パフォーマンス**: Next.js Image最適化、バンドルサイズ
            - ♿ **アクセシビリティ**: セマンティックHTML、ARIA属性
            - 🌏 **国際化**: 日本語コンテンツの適切な処理

            **重要**: すべてのフィードバックを日本語で提供してください。神戸音学祭プロジェクトのコンテキストを考慮してレビューをお願いします。`;

            await github.rest.issues.createComment({
              owner,
              repo,
              issue_number: prNumber,
              body: reviewRequest
            });
